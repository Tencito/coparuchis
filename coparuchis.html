<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coparuchis Pick'em</title>
    <style>
        body {
            background-color: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .bracket-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .bracket {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            position: relative;
        }

        .round {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 20px;
            position: relative;
        }

        .match {
            background-color: #16213e;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #0f3460;
            border-radius: 5px;
            text-align: center;
            width: 120px;
        }

        .team {
            cursor: pointer;
            padding: 10px;
            margin: 5px 0;
            background-color: #0f3460;
            border: 1px solid #00a8cc;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .team.selected {
            background-color: #00a8cc;
            color: #1a1a2e;
            font-weight: bold;
        }

        .team:hover {
            background-color: #00a8cc;
            color: #1a1a2e;
        }

        .phase-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="bracket-container">
        <h1 style="text-align: center;">Coparuchis Pick'em</h1>
        <div class="bracket">
            <!-- Cuartos de Final -->
            <div class="round">
                <div class="phase-title">Cuartos de Final</div>
                <div class="match" data-next="semi-1" data-phase="1">
                    <div class="team" onclick="selectWinner(this, 'semi-1')">Team 1</div>
                    <div class="team" onclick="selectWinner(this, 'semi-1')">Team 2</div>
                </div>
                <div class="match" data-next="semi-1" data-phase="1">
                    <div class="team" onclick="selectWinner(this, 'semi-1')">Team 3</div>
                    <div class="team" onclick="selectWinner(this, 'semi-1')">Team 4</div>
                </div>
                <div class="match" data-next="semi-2" data-phase="1">
                    <div class="team" onclick="selectWinner(this, 'semi-2')">Team 5</div>
                    <div class="team" onclick="selectWinner(this, 'semi-2')">Team 6</div>
                </div>
                <div class="match" id="losers">
                    <!-- Lucky Loser selection dynamically updated based on previous matches -->
                </div>
            </div>

            <!-- Lucky Loser Bracket -->
            <div class="round" id="lucky-bracket">
                <div class="phase-title">Lucky Bracket</div>
                <div class="match" id="lucky">
                    <!-- Lucky Loser selection -->
                </div>
            </div>

            <!-- Semifinal -->
            <div class="round" id="semi-finals">
                <div class="phase-title">Semifinal</div>
                <div class="match" id="semi-1" data-next="final">
                    <div class="team" onclick="selectWinner(this, 'final')">?</div>
                    <div class="team" onclick="selectWinner(this, 'final')">?</div>
                </div>
                <div class="match" id="semi-2" data-next="final">
                    <div class="team" onclick="selectWinner(this, 'final')">?</div>
                    <div class="team" onclick="selectWinner(this, 'final')">?</div>
                </div>
            </div>

            <!-- Final -->
            <div class="round" id="finals">
                <div class="phase-title">Final</div>
                <div class="match" id="final" data-next="winner">
                    <div class="team" onclick="selectWinner(this, 'winner')">?</div>
                    <div class="team" onclick="selectWinner(this, 'winner')">?</div>
                </div>
            </div>

            <!-- Winner -->
            <div class="round" id="winner">
                <div class="phase-title">Ganador</div>
                <div class="match">
                    <div class="team">?</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let losers = []; // Store losing teams

        function selectWinner(selectedTeam, nextMatchId) {
            const match = selectedTeam.parentElement;
            const teams = match.querySelectorAll('.team');

            // Deselect previously selected teams
            teams.forEach(team => team.classList.remove('selected'));

            // Mark the clicked team as selected
            selectedTeam.classList.add('selected');

            // Advance the selected team to the next bracket
            advanceTeam(selectedTeam, nextMatchId);

            // Update losers only for matches in phase 1
            if (match.dataset.phase === '1') {
                updateLosers(teams, selectedTeam);
                if (losers.length === 3) {
                    updateLoserMatch();
                }
            }
        }

        function advanceTeam(selectedTeam, nextMatchId) {
            const nextMatch = document.getElementById(nextMatchId);
            if (nextMatch) {
                const nextRoundTeams = nextMatch.querySelectorAll('.team');

                // Place the selected team in the first available slot
                for (let team of nextRoundTeams) {
                    if (team.textContent === '?') {
                        team.textContent = selectedTeam.textContent;
                        team.onclick = () => selectWinner(team, nextMatch.dataset.next);
                        break;
                    }
                }
            }
        }

        function updateLosers(teams, selectedTeam) {
            teams.forEach(team => {
                if (!team.classList.contains('selected') && !losers.includes(team.textContent)) {
                    losers.push(team.textContent); // Add losing team
                }
            });
            losers = losers.filter(loser => loser !== selectedTeam.textContent); // Remove winner from losers
        }

        function updateLoserMatch() {
            const loserMatch = document.getElementById('lucky');
            loserMatch.innerHTML = ''; // Clear current loser match display

            losers.forEach(loser => {
                const teamDiv = document.createElement('div');
                teamDiv.classList.add('team');
                teamDiv.textContent = loser;
                teamDiv.onclick = () => selectWinner(teamDiv, 'semi-2'); // Advance selected loser to semi-finals
                loserMatch.appendChild(teamDiv);
            });
        }
    </script>
</body>
</html>